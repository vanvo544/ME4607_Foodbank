<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tạo yêu cầu giao hàng</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-950 text-slate-50 p-4">
  <h1 class="text-lg font-semibold mb-4">Tạo yêu cầu giao hàng</h1>

  <form id="requestForm" class="space-y-3">
    <div>
      <label class="block text-sm mb-1">Kiểu yêu cầu giao hàng</label>
      <select id="reqType" class="w-full p-2 rounded bg-slate-900 border border-slate-700">
        <option value="Tập kết">Tập kết</option>
        <option value="Đặc biệt">Đặc biệt</option>
      </select>
    </div>
    <div>
      <label class="block text-sm mb-1">Số hộ yếu thế ước tính</label>
      <input id="reqHouseholds" type="number" class="w-full p-2 rounded bg-slate-900 border border-slate-700" required>
    </div>
    <div>
      <label class="block text-sm mb-1">Mức độ ưu tiên</label>
      <select id="reqPriority" class="w-full p-2 rounded bg-slate-900 border border-slate-700">
        <option value="Cao">Cao</option>
        <option value="Trung bình">Trung bình</option>
        <option value="Thấp">Thấp</option>
      </select>
    </div>
    <button type="submit" class="w-full py-2 bg-emerald-500 rounded">Gửi yêu cầu</button>
  </form>

  <h2 class="text-md font-semibold mt-6 mb-2">Danh sách yêu cầu đã gửi</h2>
  <div id="requestList" class="space-y-2"></div>

  <script>
  const STORAGE_KEY="cl_requests";
  const getReqs=()=>JSON.parse(localStorage.getItem(STORAGE_KEY)||"[]");
  const saveReqs=(arr)=>localStorage.setItem(STORAGE_KEY,JSON.stringify(arr));
  const listDiv=document.getElementById("requestList");
  function renderReqs(){
    const arr=getReqs();
    listDiv.innerHTML="";
    arr.forEach(r=>{
      listDiv.innerHTML+=`<div class="border border-slate-700 rounded p-3">
      <p class="text-sm font-semibold">${r.type} – Ưu tiên ${r.priority}</p>
      <p class="text-[12px] text-slate-400">Số hộ: ${r.households} • ${r.date}</p></div>`;
    });
  }
  document.getElementById("requestForm").addEventListener("submit",e=>{
    e.preventDefault();
    const now=new Date();
    const data={
      type:reqType.value,
      households:+reqHouseholds.value,
      priority:reqPriority.value,
      date:now.toLocaleString("vi-VN")
    };
    const arr=getReqs();
    arr.push(data);
    saveReqs(arr);
    renderReqs();
    alert("Đã tạo yêu cầu!");
    e.target.reset();
  });
  renderReqs();
  </script>
</body>
</html>
